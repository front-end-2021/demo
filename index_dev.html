<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
    <title> front-end-2021 </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow" />
    <meta http-equiv='cache-control' content='no-cache' />
    <meta http-equiv='expires' content='0' />
    <meta http-equiv='pragma' content='no-cache' />
    <link href="https://fonts.googleapis.com/css2?family=Manjari:wght@100&display=swap" rel="stylesheet">
    <style>
        body {font-family: Manjari;}
        .text-typing {
            display: inline-block
        }

        .text-typing * {
            display: inline-block;
            border-right-style: solid;
            white-space: nowrap;
            overflow: hidden;
        }
        .text-typing.text-typing-2 * {
            animation: invisble 3.9s ease-in 0s 1 normal,
                typewriter 3s steps(33) 3.9s 1 normal both,
                endtyping 3.9s steps(33) 3.9s 1 normal both,
                blinkTextCursor 666ms steps(66) 3.9s infinite normal;
        }
        
        @keyframes typewriter {
            from { width: 0 } to { width: 100% }
        }
        @keyframes endtyping {
            0% { border-right-width: 2px } 99% { border-right-width: 2px }
            100% { border-right-width: 0 }
        }
        @keyframes blinkTextCursor {
            from { border-right-color: black } to { border-right-color: transparent }
        }

        @keyframes invisble {
            0% { opacity: 0 } 99% { opacity: 0 }
            100% { opacity: 1 }
        }
    </style>

    <style id="aabbcc">
        .dnba-texting1 { animation: typewriter 0.82s steps(9) 0.6s 1 normal both, endtyping 1.08s steps(9) 0.6s 1 normal both, blinkTextCursor 0.182s steps(18) infinite normal; }
    </style>
</head>

<body>

    <main id="dainb-app" style="font-size: 3rem;">
        <section class="dnb-title" style="display:flex;justify-content: center;align-items: center;flex-direction:column">
            <div class="text-typing">
                <h1 class="dnba-texting dnba-texting1" style="font-size: 9rem;margin-bottom: 9px;">Hello!</h1>
            </div>
            <div class="text-typing text-typing-2">
                <h2>This is front-end-2021</h2>
            </div>
            <div class="text-typing">
                <h2>Hello</h2>
            </div>
          </section>
    </main>
    <script>

        setTimeout(adAnimTexting, 3000);

        function adAnimTexting(){
            const styleAbc = document.getElementById('aabbcc');

            const textDOM = document.querySelector('.dnba-texting');
            textDOM.className = "dnba-texting";
            textDOM.innerText = 'My name is Dai.';

            const text = textDOM.innerText;
            const steps = parseInt(text.length * 1.5);
            const durationTexting = steps / 11;
            const durationEnd = durationTexting * 1.32;
            const durationBlind = durationTexting / 4.5;
            const typewriter = `typewriter ${roundeFloat(durationTexting)}s steps(${steps}) 0.6s 1 normal both`;
            const endtyping = `endtyping ${roundeFloat(durationEnd)}s steps(${steps}) 0.6s 1 normal both`;
            const blinkTextCursor = `blinkTextCursor ${roundeFloat(durationBlind)}s steps(${steps * 2}) infinite normal`;
            const className = `dnba-texting_${steps.toString().replace('.', '_')}`;
            const animName = `.${className} { animation: ${typewriter}, ${endtyping}, ${blinkTextCursor};}`;
            console.log(text);
            console.log(animName);
            console.log(styleAbc.innerText);
            styleAbc.innerHTML = animName;
            textDOM.classList.add(className);
        }

        function roundeFloat(num){
            return +(num.toFixed(3));
        }
    </script>
</body>

</html>