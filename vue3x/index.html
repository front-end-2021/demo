<!DOCTYPE html>
<html>

<head>
  <title>Exercise Vue3</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.css" rel="stylesheet">
  <link rel="stylesheet" href="./main-style.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://unpkg.com/vuex@4.1.0/dist/vuex.global.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.js"></script>
</head>

<body>
  <main id="app" v-cloak>
    <header class="p-3 bg-primary">
      <section class="container-fluid d-inline-flex justify-content-start align-items-center">
        <div class="d-inline-flex justify-content-start align-items-center grp-logo">
          <i class="bi bi-bootstrap-fill me-2 font24 cpointer text-white"></i>
          <h2 class="me-3 my-0 text-white">Marketing</h2>
        </div>
        <div class="d-inline-flex justify-content-start align-items-center me-3 grp-prj">
          <drop-select :index="IndexProject" :items="$store.getters.projects" 
            :class="['grp-dropdown-min dnbdropdown-primary']"
            @set:index="$event => setIndexProject($event)">
            <template #default>
              <div class="text">{{CProject.Name}}</div>
            </template>
            <template #item="{ items, index, active }">
              <div v-for="(item, ii) in items" class="item" 
                :class="[item.Id == items[index].Id ? active : '']"
                :data-value="ii">{{item.Name}}</div>
            </template>
          </drop-select>
        </div>
        <div class="d-inline-flex justify-content-start align-items-center me-3 grp-lang">
          <h4 class="text-white mb-0 me-1">Language: </h4>
          <drop-select :index="IndexLang" :items="$store.getters.languages" 
            :class="['grp-dropdown-min dnbdropdown-primary']" style="min-width: 120px;"
            @set:index="$event => setIndexLang($event)">
            <template #default>
              <div class="text">{{CLang.Name}}</div>
            </template>
            <template #item="{ items, index, active }">
              <div v-for="(item, ii) in items" class="item" 
                :class="[item.Key == items[index].Key ? active : '']"
                :data-value="ii">{{item.Name}}</div>
            </template>
          </drop-select>
        </div>
        <div class="d-inline-flex justify-content-start align-items-center grp-options">
          <i class="bi bi-folder-fill me-3 font24 cpointer text-white"></i>
          <i class="bi bi-question-square-fill font24 cpointer text-white"></i>
          <i class="bi bi-gear-fill font24 mx-3 cpointer text-white"></i>
          <i class="bi bi-person-circle font24 cpointer text-white"
            @click.stop="e => openForm(1)"></i>
        </div>
      </section>
    </header>
    <nav class="dnb-nav d-flex align-items-center p-2 text-white">
      <h4 v-for="(page, ipg) in $store.getters.pages"
        class="my-0 mx-3 cpointer"
        :class="[ ipg === IndexPage ? 'working' : '']"
        @click.stop="e => selectPage(ipg)">{{page}}</h4>
    </nav>

    <section style="margin-bottom: 9px;">{{$store.getters.message}}</section>
    <comp-nav></comp-nav>
    <drop-select :index="UserAssign" :items="Users" @set:index="$event => setUserAssign($event)">
      <template #default>
        <div class="default text">Assign</div>
      </template>
      <template #item="{ items, index, active }">
        <div v-for="item in items" class="item" :class="[item == index ? active : '']" :data-value="item">{{item}}</div>
      </template>
    </drop-select>

    
    <component :is="CompPage"></component>

  </main>
  <template id="tmp-comp-market">
    <section>
      <div class="">
        <h4>Filter</h4>
        <drop-select :index="IndexLand" :items="ListLand" 
          :class="['grp-dropdown-min']"
          @set:index="$event => setIndexLand($event)">
          <template #default>
            <div class="default text">{{TxtLang.PleaseSelect}}</div>
          </template>
          <template #item="{ items, index, active }">
            <div v-for="(item, ii) in items" class="item" 
              :class="[item.Id == items[index].Id ? active : '']" 
              :data-value="ii">{{item.Name}}</div>
          </template>
        </drop-select>
       <div class="mt-2">
        <button>Filter</button>
        <button>Reset</button>
        <button>Add filter</button>
       </div>
      </div>
      <article>
        <span>Eval markets</span>
        <span>Eval submarkets</span>
        <span>Strategy</span>
        <span>Plan from submarkets</span>
        <span>All criterials</span>
        <div>
          <h2>Market segments</h2>
          <div><button>123</button></div>
        </div>
        <div>

        </div>
      </article>
    </section>
  </template>
  <template id="tmp-comp-drop-select">
    <div class="ui selection dropdown" style="height: 38px;">
      <input type="hidden" name="drp-select" :value="index">
      <i class="dropdown icon"></i>
      <slot name="default"></slot>
      <div class="menu">
        <slot name="item" :items="items" active="active selected" :index="index"></slot>
      </div>
    </div>
  </template>
  <template id="tmp-comp-nav">
    <button @click="upCount">Clicked {{ count }} {{1 == count ? 'time' : 'times'}}.</button>
    <button @click="resetCount" style="margin-left:9px;">Reset Count</button>
    
  </template>
  <section id="app-modal">
    <comp-modal v-if="$store.getters.moItem">
      <template #xbtn="{ onexit }">
        <i class="close icon" @click.stop="onexit"></i>
      </template>
      <template #context="{ mitem, changedes }">
        <div class="header">{{mitem.header}}</div>
        <div class="image content">
          <div class="ui medium image">
            <img :src="mitem.img" style="border-radius: 8px;">
          </div>
          <div class="description">
            <div class="ui header">{{mitem.content.head}}</div>
            <p contenteditable="true" v-html="mitem.content.description"
              @input="changedes"
              style="min-height: 180px; width: 570px;"></p>
          </div>
        </div>
      </template>
      <template #confirmno="{ onexit }">
        <div class="ui black deny button" @click.stop="onexit">Nope</div>
      </template>
      <template #confirmyes="{ onsave }">
        <div class="ui positive right labeled icon button" @click.stop="onsave">Yep, that's me<i
          class="checkmark icon"></i>
      </div>
      </template>
    </comp-modal>
  </section>
  <template id="tmp-comp-modal">
    <div class="ui modal">
      <slot name="xbtn" :onexit="onExitClose"></slot>
      <slot name="context" :mitem="MItem" :changedes="onChangeDes"></slot>
      <div class="actions">
        <slot name="confirmno" :onexit="onExitClose"></slot>
        <slot name="confirmyes" :onsave="onSaveClose"></slot>
      </div>
    </div>
  </template>
  <script type="module" src="main-app.js"></script>

</body>

</html>