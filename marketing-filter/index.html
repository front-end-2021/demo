<head>
    <link rel="stylesheet" href="3rd/bootstrap.min.css" />
    <link rel="stylesheet" href="3rd/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="3rd/default-ocean-blue.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="3rd/jquery-3.4.1.min.js"></script>
    <script src="3rd/kendo.all.min.js"></script>

    <script src="mock-data.js"></script>
    <script src="modal.js"></script>
</head>

<body>
    <main>
        <section id="mFilter">
            <div class="list-criterial"></div>
            <div class="list-button">
                <button type="button" class="btn btn-secondary"><i class="bi bi-arrow-repeat">
                    </i> Reset</button>
                <button type="button" class="btn btn-primary btnAddFilter">
                    <i class="bi bi-plus-circle"></i> Add</button>
                <button type="button" class="btn btn-primary">
                    <i class="bi bi-download"></i> Save filter</button>
    
            </div>
        </section>
        <article>
            <h6>View Goals: </h6>
            <div></div>
        </article>
    </main>
    <section id="dashboard">
        <div class="list-land"><h6 onclick="toggleCollapse(this)">List Land: <b>&#10010;</b></h6></div>
        <div class="list-region"><h6 onclick="toggleCollapse(this)">List Region:  <b>&#10010;</b></h6></div>
        <div class="list-productgroup"><h6 onclick="toggleCollapse(this)">List Product group:  <b>&#10010;</b></h6></div>
        <div class="list-product"><h6 onclick="toggleCollapse(this)">List Product:  <b>&#10010;</b></h6></div>
        <div class="list-subproduct"><h6 onclick="toggleCollapse(this)">List Sub product:  <b>&#10010;</b></h6></div>
        <div class="list-market"><h6 onclick="toggleCollapse(this)">List Market:  <b>&#10010;</b></h6></div>
        <div class="list-submarket"><h6 onclick="toggleCollapse(this)">List sub market: <b>&#10010;</b></h6></div>
    </section>
    <script>
        let mktFilter
        $(document).ready(function () {
            const $mFilter = $('#mFilter')
            mktFilter = new mkFilter($mFilter, [new Criterial(0, 1, [0, 0])])

            const btnAddFilter = document.querySelector('#mFilter .btnAddFilter')
            btnAddFilter.addEventListener('click', (e) => mktFilter.addFilter())
            mktFilter.onSelectFilter = renderGoals

            renderDashboard(document.querySelector(`#dashboard`))
        })
        function renderGoals(goalIds) {
            const goals = Goals.filter(x => goalIds.includes(x.Id))
            console.log(goals)
        }
        function renderDashboard(container) {
            const dLstLand = container.querySelector(`.list-land`)
            const dLstRegion = container.querySelector(`.list-region`)
            const dLstPrdGroup = container.querySelector(`.list-productgroup`)
            const dLstProduct = container.querySelector(`.list-product`)
            const dLstSubProduct = container.querySelector(`.list-subproduct`)
            const dLstMarket = container.querySelector(`.list-market`)
            const dLstSubMarket = container.querySelector(`.list-submarket`)

            renderLands()
            renderRegions()
            renderProductGroups()

            
            function renderProductGroups() {
                const $wrapLst = $(dLstPrdGroup)
                for (let ii = 0; ii < ProductGroups.length; ii++) {
                    const item = ProductGroups[ii]
                    $wrapLst.append(`<div class="lst-entry">
                        <span>${item.Id}</span>
                        <input type="text" class="form-control" value="${item.Name}"/>
                        <button type="button" class="btn btn-secondary">Update</button>
                        </div>`)
                }
            }
            function renderRegions() {
                const $wrapLst = $(dLstRegion)
                for (let ii = 0; ii < Regions.length; ii++) {
                    const item = Regions[ii]
                    $wrapLst.append(`<div class="lst-entry">
                        <span>${item.Id}</span>
                        <input type="text" class="form-control" value="${item.Name}"/>
                        <button type="button" class="btn btn-secondary">Update</button>
                        </div>`)
                }
            }
            function renderLands() {
                const $wrapLst = $(dLstLand)
                for (let ii = 0; ii < Lands.length; ii++) {
                    const item = Lands[ii]
                    $wrapLst.append(`<div class="lst-entry">
                        <span>${item.Id}</span>
                        <input type="text" class="form-control" value="${item.Name}"/>
                        <button type="button" class="btn btn-secondary">Update</button>
                        </div>`)
                }
            }
        }
        function toggleCollapse(e) {
            const container = e.closest(`[class|="list"]`)
            container.classList.toggle('dnb-collapse');
        }
    </script>
</body>