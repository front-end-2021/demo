<head>
    <link rel="stylesheet" href="3rd/bootstrap.min.css" />
    <link rel="stylesheet" href="3rd/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="3rd/default-ocean-blue.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="3rd/jquery-3.4.1.min.js"></script>
    <script src="3rd/kendo.all.min.js"></script>

    <script src="mock-data.js"></script>
    <script src="modal.js"></script>
</head>

<body>
    <section id="mFilter">
        <div class="list-criterial">

        </div>
        <div class="list-button">
            <button type="button" class="btn btn-primary">
                <i class="bi bi-search"></i> Filter</button>
            <button type="button" class="btn btn-secondary"><i class="bi bi-arrow-repeat">
                </i> Reset</button>
            <button type="button" class="btn btn-primary">
                <i class="bi bi-plus-circle"></i> Add</button>
            <button type="button" class="btn btn-primary">
                <i class="bi bi-download"></i> Save filter</button>
                
        </div>
    </section>
    <script>
        const lstOperand = []
        const lstType = []
        $(document).ready(function () {
            const $mFilter = $('#mFilter')
            const $lstCrite = $mFilter.find('.list-criterial')
            for(let ii = 0; ii < mFilter.Blocks.length; ii++) {
                const row = mFilter.Blocks[ii]
                // {Operand, Type, Ids}
                let tRow = `<div class="m-criterial">
                    <input class="mOperand" style="width: 96px;" />
                    <input class="mType" style="width: 240px;"/>
                </div>`
                $lstCrite.append(tRow)

                let $operand = $lstCrite.find('.mOperand')
                $operand.kendoDropDownList({
                    dataTextField: "Name",
                    dataValueField: "Id",
                    dataSource: ii > 0 ? Operands : filterBy,
                    enable: ii < 1 ? false : true,
                    value: row.Operand,                    
                    change: function(e) {
                        const value = this.value()
                        row.Operand = parseInt(value)
                    }
                })
                lstOperand.push($operand)
                let $type = $lstCrite.find('.mType')
                $type.kendoDropDownList({
                    dataTextField: "Name",
                    dataValueField: "Id",
                    dataSource: mType,
                    value: row.Type,
                    change: function(e) {
                        const value = this.value()
                        row.Type = parseInt(value)
                    }
                })
                lstType.push($type)

                if(row.Ids.length) {
                    const $tRow = $lstCrite.find('.m-criterial')
                    for(let jj = 0; jj < row.Ids; jj++) {
                        const _id = row.Ids[jj]

                    }
                }
                
            }
        })
        
    </script>
</body>